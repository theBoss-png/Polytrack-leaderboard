<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Racing Leaderboard</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      color: white;
      padding: 20px;
    }
    .container { max-width: 1400px; margin: 0 auto; }
    .header { text-align: center; margin-bottom: 30px; }
    .header h1 {
      font-size: 3rem; margin-bottom: 10px;
      background: linear-gradient(45deg, #ffd700, #ffed4e);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .tabs { display: flex; justify-content: center; margin-bottom: 30px; }
    .tab-button { background: transparent; border: none; color: white; padding: 12px 24px; cursor: pointer; }
    .tab-button.active { background: rgba(255,255,255,0.3); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    th { background: rgba(255,255,255,0.2); }
    .rank-cell { font-weight: bold; font-size: 1.2rem; }
    .rank-1 { color: #ffd700; }
    .rank-2 { color: #c0c0c0; }
    .rank-3 { color: #cd7f32; }
    .player-avatar { width: 30px; height: 30px; border-radius: 50%; display: inline-block; margin-right: 10px; }
    .track-card { background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 20px; }
    .track-name { font-size: 1.3rem; font-weight: 600; color: #ffd700; margin-bottom: 10px; }
    .track-results { list-style: none; padding: 0; }
    .track-results li { display: flex; justify-content: space-between; padding: 5px 0; }
    .no-record { color: #888; font-style: italic; }
    .stats-grid { display: flex; gap: 20px; margin-top: 20px; }
    .stat-card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; flex: 1; text-align: center; }
    .stat-number { font-size: 2rem; font-weight: bold; color: #ffd700; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üèÅ Racing Leaderboard</h1>
      <p>Competitive Racing Statistics & Rankings</p>
    </div>

    <div class="tabs">
      <button class="tab-button active" onclick="showTab('overall')">Overall Leaderboard</button>
      <button class="tab-button" onclick="showTab('tracks')">Track Records</button>
      <button class="tab-button" onclick="showTab('stats')">Player Stats</button>
    </div>

    <!-- Overall Leaderboard -->
    <div id="overall" class="tab-content active">
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>Player</th>
          </tr>
        </thead>
        <tbody id="leaderboard-body"></tbody>
      </table>
    </div>

    <!-- Track Records -->
    <div id="tracks" class="tab-content">
      <div id="track-grid"></div>
    </div>

    <!-- Player Stats -->
    <div id="stats" class="tab-content">
      <div class="stats-grid" id="stats-grid"></div>
    </div>
  </div>

  <script>
    let sampleData = {};

    async function loadData() {
      const response = await fetch("leaderboard.json");
      sampleData = await response.json();
      populateLeaderboard();
      populateTrackRecords();
      populatePlayerStats();
    }

    function showTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }

    function createPlayerAvatar(carColors) {
      const color = carColors?.length ? `#${carColors[0]}` : '#3498db';
      return `<div class="player-avatar" style="background:${color}"></div>`;
    }

    function populateLeaderboard() {
      const tbody = document.getElementById('leaderboard-body');
      tbody.innerHTML = '';
      sampleData.players.forEach((player, index) => {
        const rank = index + 1;
        const rankClass = rank <= 3 ? `rank-${rank}` : '';
        tbody.innerHTML += `
          <tr>
            <td class="rank-cell ${rankClass}">#${rank}</td>
            <td>${createPlayerAvatar(player.carColors)} ${player.name}</td>
          </tr>`;
      });
    }

    function populateTrackRecords() {
      const trackGrid = document.getElementById('track-grid');
      trackGrid.innerHTML = '';
      sampleData.tracks.forEach(track => {
        const resultsHtml = track.results
          .filter(r => r.time !== null)
          .sort((a,b) => a.time - b.time)
          .map((r,i) => `<li>#${i+1} ${r.player} - ${r.time.toFixed(3)}s</li>`).join('');
        const noRecord = track.results
          .filter(r => r.time === null)
          .map(r => `<li>${r.player} - <span class="no-record">No Record</span></li>`).join('');
        trackGrid.innerHTML += `
          <div class="track-card">
            <div class="track-name">${track.name}</div>
            <ul class="track-results">${resultsHtml}${noRecord}</ul>
          </div>`;
      });
    }

    function populatePlayerStats() {
      const statsGrid = document.getElementById('stats-grid');
      statsGrid.innerHTML = '';
      const stats = [
        { label: "Total Players", value: sampleData.players.length },
        { label: "Active Tracks", value: sampleData.tracks.length },
        { label: "Total Races", value: sampleData.tracks.length * sampleData.players.length }
      ];
      stats.forEach(stat => {
        statsGrid.innerHTML += `
          <div class="stat-card">
            <span class="stat-number">${stat.value}</span>
            <span>${stat.label}</span>
          </div>`;
      });
    }

    loadData();
  </script>
</body>
</html>
